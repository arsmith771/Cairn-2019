function closeText(e,t,r,s){jQuery(document).on("click",e,function(){jQuery(t).fadeOut();var e=document.getElementById(r),n=jQuery(s);e.pause(),n.addClass("paused"),n.removeClass("playing")})}function ctrlAudio(e,t){jQuery(e).on("click",function(){var e=document.getElementById(t);jQuery(this).hasClass("paused")?(e.play(),jQuery(this).addClass("playing"),jQuery(this).removeClass("paused")):(e.pause(),jQuery(this).addClass("paused"),jQuery(this).removeClass("playing"))})}function modalPosition(){jQuery(".story-screen").width()<320?jQuery(".story-screen__text").css("position","fixed"):jQuery(".story-screen__text").removeAttr("style")}function fadeOutLoadingModal(){jQuery("#loading-modal").fadeOut()}function toggleTextLayer(){jQuery(".text-cta").on("click",function(e){jQuery(this).closest(".story-screen__graphic").siblings(".story-screen__text").fadeIn(),console.log("clicked")}),jQuery(".text-cta").on("keypress",function(e){13==e.which&&jQuery(this).closest(".story-screen__graphic").siblings(".story-screen__text").fadeIn()})}function isElementinViewPort2(){jQuery(".story-screen").each(function(e){var t=document.getElementById("story-screen--"+e).getBoundingClientRect();t.top>=-100&&t.top<100?jQuery(this).addClass("animate"):jQuery(this).removeClass("animate")})}function screenBorders(){var e=window.innerWidth,t=jQuery(".story-screen"),r=t.eq(0).width();console.log(r+60,e),r+60<=e?(t.addClass("story-screen--with-border"),jQuery("body").addClass("body--with-graphics")):(t.removeClass("story-screen--with-border"),jQuery("body").removeClass("body--with-graphics"))}function leafAnim(){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var r=e[t].string,s=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,r){if(-1!=r.indexOf(e[t].subString))return e[t].identity}else if(s)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};if(e.init(),!("Safari"===e.browser&&e.version<9)){var t=["red-leaf","brown-leaf","yellow-leaf","green-leaf"],r=["small-move","medium-move","large-move","large-move"],s=document.querySelector(".container"),n=0;setInterval(function(){var e=jQuery(".body--with-graphics").length;if("hidden"===document.visibilityState||e<1)console.info("Browser not in focus, so we will not generate new leaves");else{n>6&&(console.info("Limit reached on number of leaves  (6), so we are culling the oldest one..."),s.removeChild(s.querySelector(".leaf")));var o=document.createElement("div"),i=Math.floor(Math.random()*t.length);o.classList.add(t[i]);var a=Math.floor(Math.random()*r.length);o.classList.add(r[a]),o.classList.add("leaf");var c=document.createElement("div");c.classList.add("y-axis");var l=document.createElement("div");l.classList.add("x-axis"),c.appendChild(l),o.appendChild(c);var d=Math.random()*window.innerWidth;o.style.position="absolute",o.style.left=`${d}px`;o.style.top="-25vh",s.appendChild(o),n++}},1e3)}}function addFooter(){jQuery(".story-screen").not(".story-screen--10, .story-screen--16, .story-screen--15, .story-screen--13, .story-screen--11").each(function(){var e=jQuery(this),t=e.height(),r=e.find(".story-screen__graphic").height(),s=e.find(".story-screen--footer").length;t<r&&s<1?e.append('<div class="story-screen--footer" />'):t>=r&&e.find(".story-screen--footer").remove()})}jQuery(window).on("load",function(){leafAnim()}),jQuery("#app").on("scroll",function(){isElementinViewPort2()}),jQuery(document).ready(function(){screenBorders(),toggleTextLayer(),isElementinViewPort2(),addFooter(),closeText("#story-screen__text__close--0","#story-screen__text--0","audio-0","#ctrl-0"),closeText("#story-screen__text__close--1","#story-screen__text--1"),closeText("#story-screen__text__close--2","#story-screen__text--2"),closeText("#story-screen__text__close--3","#story-screen__text--3"),closeText("#story-screen__text__close--4","#story-screen__text--4"),closeText("#story-screen__text__close--5","#story-screen__text--5"),closeText("#story-screen__text__close--6","#story-screen__text--6"),closeText("#story-screen__text__close--7","#story-screen__text--7"),closeText("#story-screen__text__close--8","#story-screen__text--8"),closeText("#story-screen__text__close--9","#story-screen__text--9"),closeText("#story-screen__text__close--10","#story-screen__text--10"),closeText("#story-screen__text__close--11","#story-screen__text--11"),closeText("#story-screen__text__close--12","#story-screen__text--12"),closeText("#story-screen__text__close--13","#story-screen__text--13"),closeText("#story-screen__text__close--14","#story-screen__text--14"),closeText("#story-screen__text__close--15","#story-screen__text--15"),closeText("#story-screen__text__close--16","#story-screen__text--16"),ctrlAudio("#ctrl-0","audio-0"),modalPosition(),fadeOutLoadingModal()}),jQuery(window).on("resize",function(){screenBorders(),modalPosition()});